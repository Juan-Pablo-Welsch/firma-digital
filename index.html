<!DOCTYPE html>
<html>
<head>
  <title>Firma Digital</title>
</head>
<body>
  <h2>Firma aquí abajo</h2>
  <canvas id="firma" width="400" height="200" style="border:1px solid #000;"></canvas><br>
  <button onclick="guardarFirma()">Guardar Firma</button>
  <br><br>
  <img id="imgFirma" style="display:none;"/>
  <script>
    const canvas = document.getElementById("firma");
    const ctx = canvas.getContext("2d");
    let dibujando = false;

    canvas.addEventListener("mousedown", e => { dibujando = true; dibujar(e); });
    canvas.addEventListener("mouseup", () => { dibujando = false; ctx.beginPath(); });
    canvas.addEventListener("mousemove", dibujar);

    function dibujar(e) {
      if (!dibujando) return;
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.strokeStyle = "black";
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    }

    function guardarFirma() {
      const imgData = canvas.toDataURL();
      document.getElementById("imgFirma").src = imgData;
      document.getElementById("imgFirma").style.display = 'block';
      // Aquí puedes subir la imagen a un servidor o servicio como Firebase, Google Drive, etc.
      console.log(imgData); // Imagen en base64
    }
  </script>
</body>
</html>
